<div class="dashboard-container">
  <!-- Header avec animation -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        <span class="title-text">Tableau de Bord Analytics</span>
        <div class="title-underline"></div>
      </h1>
      <p class="dashboard-subtitle">Insights en temps réel de votre gestion de stock</p>
    </div>
    <div class="header-decoration">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
      </div>
    </div>
  </div>

  <!-- Métriques principales avec animations -->
  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="metric-content">
        <h3 class="metric-value">{{ totalVentes | currency:'MAD':'symbol':'1.0-0' }}</h3>
        <p class="metric-label">Chiffre d'Affaires Total</p>
        <div class="metric-change positive">
          <i class="fas fa-arrow-up"></i>
          <span>+12.5%</span>
        </div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-shopping-cart"></i>
      </div>
      <div class="metric-content">
        <h3 class="metric-value">{{ totalCommandes }}</h3>
        <p class="metric-label">Commandes Traitées</p>
        <div class="metric-change positive">
          <i class="fas fa-arrow-up"></i>
          <span>+8.2%</span>
        </div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-boxes"></i>
      </div>
      <div class="metric-content">
        <h3 class="metric-value">{{ totalProduits }}</h3>
        <p class="metric-label">Produits en Stock</p>
        <div class="metric-change negative">
          <i class="fas fa-arrow-down"></i>
          <span>-3.1%</span>
        </div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="metric-content">
        <h3 class="metric-value">{{ totalClients }}</h3>
        <p class="metric-label">Clients Actifs</p>
        <div class="metric-change positive">
          <i class="fas fa-arrow-up"></i>
          <span>+15.3%</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphiques avec design moderne -->
  <div class="charts-section">
    <div class="row">
      <!-- Graphique en barres avec gradient -->
      <div class="col-lg-6 mb-4">
        <div class="chart-card modern-card">
          <div class="chart-header">
            <div class="chart-title">
              <i class="fas fa-chart-bar"></i>
              <h3>Ventes Mensuelles</h3>
            </div>
            <div class="chart-controls">
              <button class="btn-control active" (click)="changeChartPeriod('month')">Mois</button>
              <button class="btn-control" (click)="changeChartPeriod('week')">Semaine</button>
            </div>
          </div>
          <div class="chart-body">
            <canvas baseChart
                    [data]="ventesParMois"
                    [options]="barChartOptions"
                    [type]="barChartType"
                    class="chart-canvas">
            </canvas>
          </div>
        </div>
      </div>

      <!-- Graphique en secteurs avec animation -->
      <div class="col-lg-6 mb-4">
        <div class="chart-card modern-card">
          <div class="chart-header">
            <div class="chart-title">
              <i class="fas fa-chart-pie"></i>
              <h3>Top Produits</h3>
            </div>
            <div class="chart-legend">
              <div class="legend-item" *ngFor="let item of legendItems">
                <div class="legend-color" [style.background-color]="item.color"></div>
                <span>{{ item.label }}</span>
              </div>
            </div>
          </div>
          <div class="chart-body">
            <canvas baseChart
                    [data]="produitsPlusVendus"
                    [options]="pieChartOptions"
                    [type]="pieChartType"
                    class="chart-canvas">
            </canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Graphique linéaire avec zone de remplissage -->
    <div class="row">
      <div class="col-12">
        <div class="chart-card modern-card full-width">
          <div class="chart-header">
            <div class="chart-title">
              <i class="fas fa-chart-line"></i>
              <h3>Évolution du Chiffre d'Affaires</h3>
            </div>
            <div class="chart-filters">
              <select class="filter-select" (change)="onFilterChange($event)">
                <option value="6months">6 derniers mois</option>
                <option value="1year">1 an</option>
                <option value="2years">2 ans</option>
              </select>
            </div>
          </div>
          <div class="chart-body">
            <canvas baseChart
                    [data]="chiffreAffaires"
                    [options]="lineChartOptions"
                    [type]="lineChartType"
                    class="chart-canvas">
            </canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Section des alertes et notifications -->
  <div class="alerts-section">
    <div class="row">
      <div class="col-md-4 mb-3">
        <div class="alert-card warning">
          <div class="alert-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="alert-content">
            <h4>Stock Faible</h4>
            <p>5 produits nécessitent un réapprovisionnement</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="alert-card success">
          <div class="alert-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="alert-content">
            <h4>Objectif Atteint</h4>
            <p>Ventes du mois dépassent l'objectif de 15%</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="alert-card info">
          <div class="alert-icon">
            <i class="fas fa-info-circle"></i>
          </div>
          <div class="alert-content">
            <h4>Nouvelle Tendance</h4>
            <p>Augmentation des ventes le weekend</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
